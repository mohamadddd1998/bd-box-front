import { darkenColor } from "@/lib/darken-color";
import { FaXmark } from "react-icons/fa6";

interface IHeartBox {
  items: any[];
  color: string;
  onRemoveItem: (innerId: number) => void;
}
const HeartBox = ({ color, items, onRemoveItem }: IHeartBox) => {
  return (
    <svg
      width="250"
      height="250"
      viewBox="0 0 152 152"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M27.0748 49.1666C12.0322 62.9754 11.5287 86.536 25.9676 100.975L50.7011 125.708C50.8418 125.849 50.9835 125.988 51.126 126.126C51.2893 126.296 51.4547 126.465 51.6221 126.633C65.1379 140.148 87.0513 140.148 100.567 126.633L127.149 100.05C140.665 86.5345 140.665 64.6211 127.149 51.1053C113.634 37.5895 91.7203 37.5895 78.2045 51.1053L77.8988 51.4111L76.7151 50.2274C63.1232 36.6355 41.235 36.1678 27.0748 49.1666Z"
        fill={darkenColor(color)}
      />

      <path
        d="M27.3887 11.5361C41.3975 -1.2274 62.9586 -0.764789 76.4072 12.5889V49.4893C62.832 36.4501 41.4977 36.0039 27.3887 48.4707V11.5361Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />

      <path
        d="M77.5947 13.7732V50.6619L77.0312 50.0984V13.2097L77.5947 13.7732Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />
      <path
        d="M78.5205 13.468C91.8917 0.193516 113.472 0.193071 126.844 13.467V50.3665C113.348 37.4216 92.0164 37.422 78.5205 50.3674V13.468Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />

      <mask id="path-5-inside-1_281_365" fill="white">
        <path d="M78.2093 51.1053L77.9023 51.4123V13.6446L78.2093 13.3376V51.1053Z" />
      </mask>

      <path
        d="M78.2093 51.1053L77.9023 51.4123V13.6446L78.2093 13.3376V51.1053Z"
        fill={color}
      />

      <path
        d="M77.9023 51.4123H77.2809C77.2809 51.6636 77.4323 51.8903 77.6645 51.9865C77.8967 52.0826 78.1641 52.0295 78.3418 51.8517L77.9023 51.4123ZM78.2093 51.1053L78.6488 51.5448C78.7653 51.4282 78.8308 51.2701 78.8308 51.1053H78.2093ZM78.2093 13.3376H78.8308C78.8308 13.0863 78.6794 12.8597 78.4471 12.7635C78.2149 12.6673 77.9476 12.7204 77.7699 12.8982L78.2093 13.3376ZM77.9023 13.6446L77.4629 13.2052C77.3463 13.3217 77.2809 13.4798 77.2809 13.6446H77.9023ZM78.3418 51.8517L78.6488 51.5448L77.7699 50.6659L77.4629 50.9728L78.3418 51.8517ZM78.8308 51.1053V13.3376H77.5878V51.1053H78.8308ZM77.7699 12.8982L77.4629 13.2052L78.3418 14.0841L78.6488 13.7771L77.7699 12.8982ZM77.2809 13.6446V51.4123H78.5238V13.6446H77.2809Z"
        fill={color}
        mask="url(#path-5-inside-1_281_365)"
      />

      <path
        d="M26.7676 49.0325C20.8215 54.5319 17.1488 61.5482 15.7715 68.9211V37.8469C15.7694 28.467 19.4525 19.1026 26.7676 12.1174V49.0325Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />

      <path
        d="M127.467 14.1003C133.808 20.7233 136.981 29.2618 136.982 37.8025V69.0056C135.724 62.4066 132.552 56.1008 127.467 50.9783V14.1003Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />
      {items.map((item: Record<string, any>, index: number) => {
        const initialSize = 32;
        const itemsPerRow = 3;
        const startX = 32;
        const startY = 15;

        const col = index % itemsPerRow;
        const row = Math.floor(index / itemsPerRow);

        const x = startX + col * initialSize;
        const y = startY + row * initialSize;

        return (
          <g key={index}>
            <image
              key={index}
              href={item.img}
              x={x}
              y={y}
              style={{ userSelect: "none" }}
              className="w-7 h-7"
            />
            <foreignObject
              x={x + 22}
              y={y - 2}
              width={8}
              height={8}
              onClick={() => onRemoveItem(item.innerId)}
            >
              <div
                className="text-sm bg-red-500 text-white flex justify-center 
                                items-center h-2 w-2 rounded-2xl cursor-pointer"
              >
                <FaXmark size={6} />
              </div>
            </foreignObject>
          </g>
        );
      })}
      <path
        d="M136.982 75.5703C136.984 84.1156 133.812 92.6595 127.467 99.2861V62.4082C132.552 57.2855 135.724 50.98 136.982 44.3809V75.5703Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />

      <path
        d="M15.7715 44.5242C17.0572 51.3995 20.3462 57.9811 25.6602 63.3328V100.21C19.0566 93.3238 15.7734 84.4641 15.7715 75.614V44.5242Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />
      <path
        d="M126.843 99.9204L100.882 125.881V88.9927L126.843 63.0317V99.9204Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />
      <path
        d="M50.3926 88.0691V124.958L26.2803 100.845V63.9568L50.3926 88.0691Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />
      <mask id="path-13-inside-2_281_365" fill="white">
        <path d="M50.7041 125.708C50.8564 125.86 51.0097 126.011 51.164 126.16V88.392C51.0097 88.243 50.8564 88.0924 50.7041 87.9402V125.708Z" />
      </mask>
      <path
        d="M50.7041 125.708C50.8564 125.86 51.0097 126.011 51.164 126.16V88.392C51.0097 88.243 50.8564 88.0924 50.7041 87.9402V125.708Z"
        fill={color}
      />
      <path
        d="M51.164 126.16L50.7323 126.607C50.9118 126.78 51.1773 126.829 51.4069 126.732C51.6364 126.634 51.7855 126.409 51.7855 126.16H51.164ZM50.7041 125.708H50.0826C50.0826 125.873 50.1481 126.031 50.2646 126.147L50.7041 125.708ZM50.7041 87.9402L51.1436 87.5007C50.9658 87.323 50.6985 87.2698 50.4663 87.366C50.234 87.4622 50.0826 87.6888 50.0826 87.9402H50.7041ZM51.164 88.392H51.7855C51.7855 88.2234 51.7169 88.062 51.5956 87.9449L51.164 88.392ZM51.5956 125.713C51.4439 125.566 51.2932 125.418 51.1436 125.268L50.2646 126.147C50.4195 126.302 50.5754 126.455 50.7323 126.607L51.5956 125.713ZM51.3256 125.708V87.9402H50.0826V125.708H51.3256ZM50.2646 88.3796C50.4195 88.5345 50.5754 88.6877 50.7323 88.8392L51.5956 87.9449C51.4439 87.7984 51.2932 87.6504 51.1436 87.5007L50.2646 88.3796ZM50.5425 88.392V126.16H51.7855V88.392H50.5425Z"
        fill={color}
        mask="url(#path-13-inside-2_281_365)"
      />
      <mask id="path-15-inside-3_281_365" fill="white">
        <path d="M51.166 126.16C51.3188 126.319 51.4733 126.476 51.6297 126.633V88.865C51.4733 88.7087 51.3188 88.5512 51.166 88.3926V126.16Z" />
      </mask>
      <path
        d="M51.166 126.16C51.3188 126.319 51.4733 126.476 51.6297 126.633V88.865C51.4733 88.7087 51.3188 88.5512 51.166 88.3926V126.16Z"
        fill={color}
      />
      <path
        d="M51.6297 126.633L51.1902 127.072C51.368 127.25 51.6353 127.303 51.8675 127.207C52.0998 127.111 52.2512 126.884 52.2512 126.633H51.6297ZM51.166 126.16H50.5445C50.5445 126.321 50.6068 126.476 50.7184 126.591L51.166 126.16ZM51.166 88.3926L51.6136 87.9614C51.4378 87.7789 51.1687 87.7214 50.9336 87.8162C50.6985 87.911 50.5445 88.1391 50.5445 88.3926H51.166ZM51.6297 88.865H52.2512C52.2512 88.7002 52.1857 88.5421 52.0692 88.4256L51.6297 88.865ZM52.0692 126.193C51.9155 126.04 51.7637 125.885 51.6136 125.729L50.7184 126.591C50.8738 126.753 51.0311 126.913 51.1902 127.072L52.0692 126.193ZM51.7875 126.16V88.3926H50.5445V126.16H51.7875ZM50.7184 88.8237C50.8738 88.9851 51.0311 89.1454 51.1902 89.3045L52.0692 88.4256C51.9155 88.272 51.7637 88.1172 51.6136 87.9614L50.7184 88.8237ZM51.0082 88.865V126.633H52.2512V88.865H51.0082Z"
        fill={color}
        mask="url(#path-15-inside-3_281_365)"
      />
      <path
        d="M51.9385 89.6008C65.4346 102.547 86.7653 102.547 100.262 89.6018V126.501C86.89 139.776 65.3098 139.776 51.9385 126.5V89.6008Z"
        fill={color}
        stroke="#DBDBDB"
        strokeWidth="0.621485"
        strokeLinejoin="round"
      />
    </svg>
  );
};
export default HeartBox;
